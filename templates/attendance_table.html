<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ class_info[0] }} {{ class_info[1] }} - {{ class_info[2] }} Attendance</title>
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #141e30, #243b55);
  color: #f0f0f0;
  margin: 0;
  padding: 20px;
}
h1 {
  text-align: center;
  color: #00e6e6;
  text-shadow: 0 0 15px #00e6e6;
}
p.date-time {
  text-align: center;
  color: #00e6e6;
  font-weight: 500;
  margin-top: -10px;
}
form {
  margin: 20px auto;
  width: 90%;
  max-width: 900px;
  background: rgba(0,0,0,0.4);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 0 20px rgba(0, 230, 230, 0.4);
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}
th, td {
  border: 1px solid #00c6ff;
  text-align: center;
  padding: 10px;
  border-radius: 6px;
}
th {
  background-color: #00c6ff;
  color: #000;
}
input[type="radio"] {
  transform: scale(1.3);
  margin: 0 6px;
}
button {
  display: inline-block;
  background: linear-gradient(90deg, #00c6ff, #0072ff);
  border: none;
  color: white;
  padding: 12px 20px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s ease;
  margin-top: 15px;
}
button:hover {
  background: linear-gradient(90deg, #0072ff, #00c6ff);
  transform: scale(1.05);
}
.center-buttons {
  text-align: center;
}
.back-link {
  display: inline-block;
  margin-top: 25px;
  color: #00c6ff;
  text-decoration: none;
  font-weight: bold;
}
.back-link:hover {
  text-decoration: underline;
}
.mode-box {
  text-align: center;
  margin: 10px 0 20px 0;
}
.mode-box label {
  margin: 0 10px;
  font-weight: bold;
  cursor: pointer;
}
.manual-fields {
  display: none;
  text-align: center;
  margin-bottom: 10px;
}
.manual-fields input {
  padding: 8px;
  border-radius: 5px;
  border: none;
  margin: 5px;
}
</style>
<script>
function toggleMode() {
  const manualFields = document.getElementById("manual-fields");
  const autoMode = document.getElementById("autoMode").checked;
  manualFields.style.display = autoMode ? "none" : "block";
  if (autoMode) {
    document.getElementById("manual_date").value = "";
    document.getElementById("manual_time").value = "";
  }
}
</script>
</head>
<body>

<h1>{{ class_info[0] }} {{ class_info[1] }} - {{ class_info[2] }}</h1>
<p class="date-time">📅 Date: {{ current_date }} | 🕒 Time: {{ current_time }}</p>

<form method="POST">

  <div class="mode-box">
    <label><input type="radio" id="autoMode" name="mode" value="auto" checked onclick="toggleMode()"> Automatic</label>
    <label><input type="radio" id="manualMode" name="mode" value="manual" onclick="toggleMode()"> Manual</label>
  </div>

  <div id="manual-fields" class="manual-fields">
    <input type="date" name="manual_date" id="manual_date">
    <input type="time" name="manual_time" id="manual_time">
  </div>

  <table>
    <tr>
      <th>Reg No</th>
      <th>Name</th>
      <th>Status</th>
    </tr>
    {% for student in students %}
    <tr>
      <td>{{ student[1] }}</td>
      <td>{{ student[2] }}</td>
      <td>
        <label><input type="radio" name="status_{{ student[0] }}" value="P" checked> ✅</label>
        <label><input type="radio" name="status_{{ student[0] }}" value="A"> ❌</label>
      </td>
    </tr>
    {% endfor %}
  </table>

  <div class="center-buttons">
    <button type="submit">💾 Save Attendance</button>
    <button type="button" onclick="window.location.href='{{ url_for('attendance_calculation', class_id=class_id) }}'">📊 Attendance Calculation</button>
  </div>
</form>

<div class="center-buttons">
  <a href="{{ url_for('dashboard', username=session['username']) }}" class="back-link">← Back to Dashboard</a>
</div>

</body>
</html>
